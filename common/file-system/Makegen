&makegen_include("../common-Makegen");

$CPPFLAGS .= ' -I$(BUILDROOT)';

if ($features{'compiled_for_unix'}) {
    $system_lid_file = 'file-system';
} elsif ($features{'compiled_for_win32'}) {
	$system_lid_file = 'file-system';
} else {
    &unknown_platform_error();
}

$D2CFLAGS         # added by update-libdirs
    = $d2c_runtime
    . ' -L../base-file-system'
    . ' -L../collection-extensions'
    . ' -L../format'
    . ' -L../format-out'
    . ' -L../print'
    . ' -L../regular-expressions'
    . ' -L../standard-io'
    . ' -L../streams'
    . ' -L../string-ext'
    . ' -L../table-ext';

&emit_c_file_rule("dir-intr-impl");
&emit_melange_rule('dir-intr');
&emit_library_rule($system_lid_file, '$(BUILDROOT)/force.timestamp', '',
                   'compile', 'install');
